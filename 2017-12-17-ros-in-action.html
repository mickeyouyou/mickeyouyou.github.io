<html>
<head>
	
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><title>ROS 通讯框架实战</title>
	<meta name="keywords" content="fzb.me,冯宗宝,冯宗宝的blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

</head>

<body>


<!-- hexo-inject:begin --><!-- hexo-inject:end --><h2 class="title">ROS 通讯框架实战</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2017年12月17日




 </div>
--->
</div>

<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Apollo与ROS，应用层与框架层"><span class="toc-text"><a href="#Apollo&#x4E0E;ROS&#xFF0C;&#x5E94;&#x7528;&#x5C42;&#x4E0E;&#x6846;&#x67B6;&#x5C42;" class="headerlink" title="Apollo&#x4E0E;ROS&#xFF0C;&#x5E94;&#x7528;&#x5C42;&#x4E0E;&#x6846;&#x67B6;&#x5C42;"></a>Apollo&#x4E0E;ROS&#xFF0C;&#x5E94;&#x7528;&#x5C42;&#x4E0E;&#x6846;&#x67B6;&#x5C42;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ROS结构关系与实践"><span class="toc-text"><a href="#ROS&#x7ED3;&#x6784;&#x5173;&#x7CFB;&#x4E0E;&#x5B9E;&#x8DF5;" class="headerlink" title="ROS&#x7ED3;&#x6784;&#x5173;&#x7CFB;&#x4E0E;&#x5B9E;&#x8DF5;"></a>ROS&#x7ED3;&#x6784;&#x5173;&#x7CFB;&#x4E0E;&#x5B9E;&#x8DF5;</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#计算图级-Computation-Graph-level"><span class="toc-text"><a href="#&#x8BA1;&#x7B97;&#x56FE;&#x7EA7;-Computation-Graph-level" class="headerlink" title="&#x8BA1;&#x7B97;&#x56FE;&#x7EA7; Computation Graph level"></a>&#x8BA1;&#x7B97;&#x56FE;&#x7EA7; Computation Graph level</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#节点-Node"><span class="toc-text"><a href="#&#x8282;&#x70B9;-Node" class="headerlink" title="&#x8282;&#x70B9; Node"></a>&#x8282;&#x70B9; Node</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#消息-Message"><span class="toc-text"><a href="#&#x6D88;&#x606F;-Message" class="headerlink" title="&#x6D88;&#x606F; Message"></a>&#x6D88;&#x606F; Message</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#主题-Topic"><span class="toc-text"><a href="#&#x4E3B;&#x9898;-Topic" class="headerlink" title="&#x4E3B;&#x9898; Topic"></a>&#x4E3B;&#x9898; Topic</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#消息记录包-Bag"><span class="toc-text"><a href="#&#x6D88;&#x606F;&#x8BB0;&#x5F55;&#x5305;-Bag" class="headerlink" title="&#x6D88;&#x606F;&#x8BB0;&#x5F55;&#x5305; Bag"></a>&#x6D88;&#x606F;&#x8BB0;&#x5F55;&#x5305; Bag</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#服务-Service"><span class="toc-text"><a href="#&#x670D;&#x52A1;-Service" class="headerlink" title="&#x670D;&#x52A1; Service"></a>&#x670D;&#x52A1; Service</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#节点管理器-Master"><span class="toc-text"><a href="#&#x8282;&#x70B9;&#x7BA1;&#x7406;&#x5668;-Master" class="headerlink" title="&#x8282;&#x70B9;&#x7BA1;&#x7406;&#x5668; Master"></a>&#x8282;&#x70B9;&#x7BA1;&#x7406;&#x5668; Master</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参数服务器-Parameter-Server"><span class="toc-text"><a href="#&#x53C2;&#x6570;&#x670D;&#x52A1;&#x5668;-Parameter-Server" class="headerlink" title="&#x53C2;&#x6570;&#x670D;&#x52A1;&#x5668; Parameter Server"></a>&#x53C2;&#x6570;&#x670D;&#x52A1;&#x5668; Parameter Server</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文件系统级-FileSystem-level"><span class="toc-text"><a href="#&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7EA7;-FileSystem-level" class="headerlink" title="&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7EA7; FileSystem level"></a>&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7EA7; FileSystem level</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#功能包（Package）"><span class="toc-text"><a href="#&#x529F;&#x80FD;&#x5305;&#xFF08;Package&#xFF09;" class="headerlink" title="&#x529F;&#x80FD;&#x5305;&#xFF08;Package&#xFF09;"></a>&#x529F;&#x80FD;&#x5305;&#xFF08;Package&#xFF09;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#功能包清单（Manifest）"><span class="toc-text"><a href="#&#x529F;&#x80FD;&#x5305;&#x6E05;&#x5355;&#xFF08;Manifest&#xFF09;" class="headerlink" title="&#x529F;&#x80FD;&#x5305;&#x6E05;&#x5355;&#xFF08;Manifest&#xFF09;"></a>&#x529F;&#x80FD;&#x5305;&#x6E05;&#x5355;&#xFF08;Manifest&#xFF09;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#功能包集（Stack）"><span class="toc-text"><a href="#&#x529F;&#x80FD;&#x5305;&#x96C6;&#xFF08;Stack&#xFF09;" class="headerlink" title="&#x529F;&#x80FD;&#x5305;&#x96C6;&#xFF08;Stack&#xFF09;"></a>&#x529F;&#x80FD;&#x5305;&#x96C6;&#xFF08;Stack&#xFF09;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#功能包集清单（Stack-manifest）"><span class="toc-text"><a href="#&#x529F;&#x80FD;&#x5305;&#x96C6;&#x6E05;&#x5355;&#xFF08;Stack-manifest&#xFF09;" class="headerlink" title="&#x529F;&#x80FD;&#x5305;&#x96C6;&#x6E05;&#x5355;&#xFF08;Stack manifest&#xFF09;"></a>&#x529F;&#x80FD;&#x5305;&#x96C6;&#x6E05;&#x5355;&#xFF08;Stack manifest&#xFF09;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#消息类型（Message-msg-type）"><span class="toc-text"><a href="#&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF08;Message-msg-type&#xFF09;" class="headerlink" title="&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF08;Message/msg type&#xFF09;"></a>&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF08;Message/msg type&#xFF09;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#服务类型（Service-srv-type）"><span class="toc-text"><a href="#&#x670D;&#x52A1;&#x7C7B;&#x578B;&#xFF08;Service-srv-type&#xFF09;" class="headerlink" title="&#x670D;&#x52A1;&#x7C7B;&#x578B;&#xFF08;Service/srv type&#xFF09;"></a>&#x670D;&#x52A1;&#x7C7B;&#x578B;&#xFF08;Service/srv type&#xFF09;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#社区级-Community-level"><span class="toc-text"><a href="#&#x793E;&#x533A;&#x7EA7;-Community-level" class="headerlink" title="&#x793E;&#x533A;&#x7EA7; Community level"></a>&#x793E;&#x533A;&#x7EA7; Community level</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#核心的几点理解"><span class="toc-text"><a href="#&#x6838;&#x5FC3;&#x7684;&#x51E0;&#x70B9;&#x7406;&#x89E3;" class="headerlink" title="&#x6838;&#x5FC3;&#x7684;&#x51E0;&#x70B9;&#x7406;&#x89E3;"></a>&#x6838;&#x5FC3;&#x7684;&#x51E0;&#x70B9;&#x7406;&#x89E3;</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#通讯"><span class="toc-text"><a href="#&#x901A;&#x8BAF;" class="headerlink" title="&#x901A;&#x8BAF;"></a>&#x901A;&#x8BAF;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#中心进程服务的通讯"><span class="toc-text"><a href="#&#x4E2D;&#x5FC3;&#x8FDB;&#x7A0B;&#x670D;&#x52A1;&#x7684;&#x901A;&#x8BAF;" class="headerlink" title="&#x4E2D;&#x5FC3;&#x8FDB;&#x7A0B;&#x670D;&#x52A1;&#x7684;&#x901A;&#x8BAF;"></a>&#x4E2D;&#x5FC3;&#x8FDB;&#x7A0B;&#x670D;&#x52A1;&#x7684;&#x901A;&#x8BAF;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#节点之间的通讯"><span class="toc-text"><a href="#&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x8BAF;" class="headerlink" title="&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x8BAF;"></a>&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x8BAF;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据"><span class="toc-text"><a href="#&#x6570;&#x636E;" class="headerlink" title="&#x6570;&#x636E;"></a>&#x6570;&#x636E;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何调试"><span class="toc-text"><a href="#&#x5982;&#x4F55;&#x8C03;&#x8BD5;" class="headerlink" title="&#x5982;&#x4F55;&#x8C03;&#x8BD5;"></a>&#x5982;&#x4F55;&#x8C03;&#x8BD5;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何尝试新设备？"><span class="toc-text"><a href="#&#x5982;&#x4F55;&#x5C1D;&#x8BD5;&#x65B0;&#x8BBE;&#x5907;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5C1D;&#x8BD5;&#x65B0;&#x8BBE;&#x5907;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5C1D;&#x8BD5;&#x65B0;&#x8BBE;&#x5907;&#xFF1F;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实战建议"><span class="toc-text"><a href="#&#x5B9E;&#x6218;&#x5EFA;&#x8BAE;" class="headerlink" title="&#x5B9E;&#x6218;&#x5EFA;&#x8BAE;"></a>&#x5B9E;&#x6218;&#x5EFA;&#x8BAE;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-text"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</span></a></li></ol>
<blockquote>
<p>这是一篇关于ROS从基础到实践的整理教程，结合了Apollo部分的内容，主要还是以ROS核心为主。写于2017年末，2018初。</p>
</blockquote>
<h2 id="Apollo与ROS，应用层与框架层"><a href="#Apollo与ROS，应用层与框架层" class="headerlink" title="Apollo与ROS，应用层与框架层"></a>Apollo与ROS，应用层与框架层</h2><p>ROS (Robot Operating System, 机器人操作系统)是一个适用于机器人的开源操作系统。</p>
<p>包括开发者，在使用Apollo的过程中也有一定的疑惑，Apollo为什么选择ROS?</p>
<p>正如Apollo开放软件平台中指定的模块一样，Apollo是一些应用模块的堆积，这些应用需要底层运行框架的支撑，比如ROS。Apollo开放的姿态选择ROS，自然是合乎情理之中。当然在于合作伙伴的合作中，使用的也许就是定制化的运行平台。</p>
<p>架构有不同粒度，根据架构目标：</p>
<ul>
<li>系统级的架构 Kernel/OS</li>
<li>框架级的架构 ROS/Android</li>
<li>应用级的架构 Apollo</li>
</ul>
<p><img src="http://7tsys1.com1.z0.glb.clouddn.com/WechatIMG826.jpeg" width="99%"></p>
<p>系统架构：分层</p>
<ul>
<li>Kernel <ul>
<li>linux/qnx</li>
</ul>
</li>
<li>Middleware <ul>
<li>glibc/protobuf</li>
</ul>
</li>
<li>Framework <ul>
<li>ROS/Android</li>
</ul>
</li>
<li>Application <ul>
<li>Apollo</li>
</ul>
</li>
</ul>
<p>ROS是一个系统级别的framework，apollo是在framework之上的应用集合。我们需要感知决策规划等模块运行核心内容，同时也需要数据消息同步通讯。</p>
<p>通过以下两点增加理解为什么需要ROS：</p>
<ul>
<li>机器人的核心平台是解决多传感器和处理器之间、处理器和执行器之间的通信，这些通信必须保持一个统一的时钟，试想如果从传感器传回来的数据时间上不同步，那就谈不上数据融合了。</li>
<li>ROS是一个通信的框架，任务的时序规划和CPU资源分配工作靠Linux实现，ROS脱离不了Linux，ROS依附在Linux上。</li>
</ul>
<p>从以上两点来看，ROS主要解决了这方面的问题：</p>
<ul>
<li>其一，让设备间的通讯有一个统一的调度中枢（ROSCORE），通过这个中枢控制信号传递，让开发者掌握机器人的活动状态；</li>
<li>其二，代码管理的框架，让不同开发者采用不同语言进行混合开发，这样可以集成各种软件的优势协同工作，有点类似于异构系统。</li>
</ul>
<h2 id="ROS结构关系与实践"><a href="#ROS结构关系与实践" class="headerlink" title="ROS结构关系与实践"></a>ROS结构关系与实践</h2><p><img src="http://img.my.csdn.net/uploads/201304/12/1365774956_2972.png" width="99%"><br>ROS总体框架结构：</p>
<ul>
<li>计算图级 Computation Graph level</li>
<li>文件系统级 FileSystem level</li>
<li>社区级 Community level</li>
</ul>
<h3 id="计算图级-Computation-Graph-level"><a href="#计算图级-Computation-Graph-level" class="headerlink" title="计算图级 Computation Graph level"></a>计算图级 Computation Graph level</h3><p>计算图是ROS处理数据的一种点对点的网络形式。程序运行时，所有进程以及他们所进行的数据处理，将会通过一种点对点的网络形式表现出来。这一级主要包括几个重要概念：节点（<code>node</code>）、节点管理器（<code>Master</code>）、消息（<code>message</code>）、主题（<code>topic</code>）、服务（<code>service</code>）、消息包（<code>Bag</code>）。</p>
<p><img src="http://7tsys1.com1.z0.glb.clouddn.com/758868-20150925105038615-629544316.png" width="39%"></p>
<h4 id="节点-Node"><a href="#节点-Node" class="headerlink" title="节点 Node"></a>节点 Node</h4><p>节点是主要的计算执行进程。一个功能包可以有多个节点功能，就是说可以有多个main入口。如果你想要有一个可以与其他节点交互的进程，那么需要创建一个节点，并将节点链接到ROS网络。通常情况下，系统包含能够实现不同功能的多个节点，为了减少系统的风险，最好每个节点的功能都是功能较为单一的，而不是在系统中创建一个保罗万象的大节点。节点能够使用如roscpp（C++）或rospy（python）的ros客户端库编写节点程序。</p>
<p>（节点是ros中非常重要的一个概念，为了帮助初学者理解这个概念，这里举一个通俗的例子：</p>
<p>例如，咱们有一个机器人，和一个遥控器，那么这个机器人和遥控器开始工作后，就是两个节点。遥控器起到了下达指 令的作用；机器人负责监听遥控器下达的指令，完成相应动作。从这里我们可以看出，节点是一个能执行特定工作任务的工作单元，并且能够相互通信，从而实现一个机器人系统整体的功能。在这里我们把遥控器和机器人简单定义为两个节点，实际上在机器人中根据控制器、传感器、执行机构等不同组成模块，还可以将其进一步细分为更多的节点，这个是根据用户编写的程序来定义的。）</p>
<p><code>rosnode</code> 显示当前运行的ROS节点信息。<code>rosnode list</code>指令列出活跃的节点:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ rosnode list</span><br></pre></td></tr></table></figure>
<h4 id="消息-Message"><a href="#消息-Message" class="headerlink" title="消息 Message"></a>消息 Message</h4><p>节点之间是通过消息传递通讯。每一个消息都是一个严格的数据结构。原来标准的数据类型（整型，浮点型，布尔型等等）都是支持的，同时也支持原始数组类型。消息可以包含任意的嵌套结构和数组（很类似于C语言的结构structs）。</p>
<h4 id="主题-Topic"><a href="#主题-Topic" class="headerlink" title="主题 Topic"></a>主题 Topic</h4><p>消息以一种发布/订阅的方式传递。一个节点可以在一个给定的主题中发布消息。一个节点针对某个主题关注与订阅特定类型的数据。可能同时有多个节点发布或者订阅同一个主题的消息。总体上，发布者和订阅者不了解彼此的存在。</p>
<h4 id="消息记录包-Bag"><a href="#消息记录包-Bag" class="headerlink" title="消息记录包 Bag"></a>消息记录包 Bag</h4><p>消息记录包是一种用于保存和回放ROS消息数据的文件格式。消息记录包是一种用于存储数据的 重要机制。他能够获取并记录各种难以收集的传感器数据。我们可以通过消息记录包反复获取实验数据，进行必要的开发和算法测试。在使用复杂机器人进行实验工 作时，需要经常使用消息记录包。</p>
<h4 id="服务-Service"><a href="#服务-Service" class="headerlink" title="服务 Service"></a>服务 Service</h4><p>虽然基于话题的发布/订阅模型是很灵活的通讯模式，但是它广播式的路径规划对于可以简化节点设计的同步传输模式并不适合。在ROS中，我们称之为一个服务，用一个字符串和一对严格规范的消息定义：一个用于请求，一个用于回应。这类似于web服务器，web服务器是由URIs定义的，同时带有完整定义类型的请求和回复文档。需要注意的是，不像话题，只有一个节点可以以任意独有的名字广播一个服务：只有一个服务可以称之为“分类象征”，比如说，任意一个给出的URI地址只能有一个web服务器。</p>
<h4 id="节点管理器-Master"><a href="#节点管理器-Master" class="headerlink" title="节点管理器 Master"></a>节点管理器 Master</h4><p>在上面概念的基础上，需要有一个控制器可以使所有节点有条不紊的执行，这就是一个ROS的控制器（ROS Master）。<br>ROS Master 通过RPC（Remote Procedure Call Protocol，远程过程调用）提供了登记列表和对其他计算图表的查找。没有控制器，节点将无法找到其他节点，交换消息或调用服务。<br>比如控制节点订阅和发布消息的模型如下：</p>
<p>ROS的控制器给ROS的节点存储了主题和服务的注册信息。节点与控制器通信从而报告它们的注册信息。当这些节点与控制器通信的时候，它们可以接收关于其他以注册及节点的信息并且建立与其它以注册节点之间的联系。当这些注册信息改变时控制器也会回馈这些节点，同时允许节点动态创建与新节点之间的连接。</p>
<p>节点与节点之间的连接是直接的，控制器仅仅提供了查询信息，就像一个DNS服务器。节点订阅一个主题将会要求建立一个与出版该主题的节点的连接，并且将会在同意连接协议的基础上建立该连接。<br>另：ROS控制器控制服务：</p>
<h4 id="参数服务器-Parameter-Server"><a href="#参数服务器-Parameter-Server" class="headerlink" title="参数服务器 Parameter Server"></a>参数服务器 Parameter Server</h4><p>参数服务器是共享的，多变量的字典，可以通过网络API访问。节点使用参数服务器存储参数，但参数服务器不是为了高性能运算而设计，所以最好用于静态、非二进制数据，比如配置参数。参数服务器使得参数全局可见，便于更改。<br>参数服务器使用了通用XML语言的RPC互联网传输机制，运行再ROSMaster中，这也使得参数服务器的API可以通过XMLRPC的库访问。</p>
<h3 id="文件系统级-FileSystem-level"><a href="#文件系统级-FileSystem-level" class="headerlink" title="文件系统级 FileSystem level"></a>文件系统级 FileSystem level</h3><p><img src="http://7tsys1.com1.z0.glb.clouddn.com/758868-20150925095308225-1946665651.png" width="39%"></p>
<h4 id="功能包（Package）"><a href="#功能包（Package）" class="headerlink" title="功能包（Package）"></a>功能包（Package）</h4><p>功能包是ROS中软件组织的基本形式。一个功能包具有最小的结构和最少的内容，用于创建ROS程序。它可以包含ROS运行的进程（节点），配置文件等。</p>
<h4 id="功能包清单（Manifest）"><a href="#功能包清单（Manifest）" class="headerlink" title="功能包清单（Manifest）"></a>功能包清单（Manifest）</h4><p>功能包清单提供关于功能包，许可信息，依赖关系，编译标志等的信息。功能包清单是一个manifests.xml文件，通过这个文件能够实现功能包的管理。</p>
<h4 id="功能包集（Stack）"><a href="#功能包集（Stack）" class="headerlink" title="功能包集（Stack）"></a>功能包集（Stack）</h4><p>如果你将几个具有某些功能的功能包组织在一起，那么你将会获得一个功能包集。在ROS系统中，存在大量的不同用途的功能包集例如导航功能包集。</p>
<h4 id="功能包集清单（Stack-manifest）"><a href="#功能包集清单（Stack-manifest）" class="headerlink" title="功能包集清单（Stack manifest）"></a>功能包集清单（Stack manifest）</h4><p>功能包清单（stack.xml）提供了一个关于功能包集的清单，包括开源代码的许可证信息，与其他功能包集的依赖关系等。</p>
<h4 id="消息类型（Message-msg-type）"><a href="#消息类型（Message-msg-type）" class="headerlink" title="消息类型（Message/msg type）"></a>消息类型（Message/msg type）</h4><p>消息是一个进程发送到其他进程的信息。ROS系统有许多已经定义好的标准消息，你也可以自定义消息，消息存储在对应功能包的msg文件夹下。 消息类型的说明存储在mypackage/msg/MyMessageType.msg中，也就是对应功能包的msg文件夹下。</p>
<h4 id="服务类型（Service-srv-type）"><a href="#服务类型（Service-srv-type）" class="headerlink" title="服务类型（Service/srv type）"></a>服务类型（Service/srv type）</h4><p>对服务类型进行描述说明的文件，在ROS系统中服务的请求和相应的数据结构，这些描述说明存储在mypackage/srv/MyServiceType.srv中，也就是对应功能能包的srv文件夹下。</p>
<h3 id="社区级-Community-level"><a href="#社区级-Community-level" class="headerlink" title="社区级 Community level"></a>社区级 Community level</h3><p>ROS开源社区的概念主要关于ROS资源，能够独立的网络社区分享软件和知识。这些资源包括：</p>
<ul>
<li><strong>发行者（Distribution）</strong>：ROS发行版是可以独立安装的，带有版本号的一系列功能包集。ROS发行版像Linux发行版一样发挥类似的作用。这使得ROS软件安装更加容易，而且能够通过一个软件集合来维持一致的版本。</li>
<li><strong>软件源（Repositorie）</strong>：ROS依赖于共享开源代码与软件源的网站或主机服务，在这里不同的机构能够发布分享各自的机器人软件和程序。</li>
<li><strong>ROS Wiki</strong>：ROS Wiki是用于记录有关ROS系统信息的主要论坛。任何人都可以注册账户和贡献自己的文件，提供更正和更新，编写教程以及其他信息。</li>
<li><strong>邮件列表（Mailing list）</strong>：ROS用户邮件列表是关于ROS的主要交流渠道，能够交流从ROS软件更新到ROS软件使用中的各种疑问或信息。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- &apos;[2.0, 0.0, 0.0]&apos; &apos;[0.0, 0.0, 1.8]&apos;</span><br></pre></td></tr></table></figure>
<p>rostopic pub 参数解析</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-l 使用tostopic 发布一条消息后马上退出</span><br><span class="line">/turtle1/cmd_vel topic name </span><br><span class="line">geometry_msgs/Twist msg_type </span><br><span class="line">-- 告知解析器，之后的参数均不是命令选项</span><br></pre></td></tr></table></figure>
<p><img src="http://wiki.ros.org/cn/ROS/Tutorials/UnderstandingTopics?action=AttachFile&do=get&target=turtle%28rostopicpub%29.png" width="69%"></p>
<h2 id="核心的几点理解"><a href="#核心的几点理解" class="headerlink" title="核心的几点理解"></a>核心的几点理解</h2><h3 id="通讯"><a href="#通讯" class="headerlink" title="通讯"></a>通讯</h3><h4 id="中心进程服务的通讯"><a href="#中心进程服务的通讯" class="headerlink" title="中心进程服务的通讯"></a>中心进程服务的通讯</h4><h4 id="节点之间的通讯"><a href="#节点之间的通讯" class="headerlink" title="节点之间的通讯"></a>节点之间的通讯</h4><h3 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h3><h2 id="如何调试"><a href="#如何调试" class="headerlink" title="如何调试"></a>如何调试</h2><p>1、使用GDB调试器调试ROS节点</p>
<p>2、输出调试信息<br>ROS自带了大量的能够输出调试信息的函数和宏。这些信息包括错误、警告、或简单的提示信息。提供了如信息级别、条件触发消息和STL的流接口等诸多方式。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ROS_INFO(&apos; MY INFO message&apos;);</span><br></pre></td></tr></table></figure>
<h2 id="如何尝试新设备？"><a href="#如何尝试新设备？" class="headerlink" title="如何尝试新设备？"></a>如何尝试新设备？</h2><h2 id="实战建议"><a href="#实战建议" class="headerlink" title="实战建议"></a>实战建议</h2><p>（非广告）非常建议在实验楼这样已经为你提供基础环境中实践，真正关注ROS中的核心内容。</p>
<p>如果你有数据获取的相关经验，ROS的通讯机制对你来说就是一种请求交互。</p>
<p>随着人工智能的火热，ROS分布式系统，入门级的介绍会有很多，最经典的是官方的wiki。所以本文更关注ROS内部的实现原理，从核心进程的创建到节点之间的通讯过程等等内容。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>本篇关于ROS的教程主要参考了以下部分材料：</p>
<ul>
<li><a href="https://item.jd.com/11557934.html" target="_blank" rel="noopener">《ROS机器人程序设计》</a></li>
<li><a href="https://item.jd.com/12125243.html" target="_blank" rel="noopener">《基于ROS的机器人理论与应用》</a></li>
<li><a href="http://wiki.ros.org/cn" target="_blank" rel="noopener">ROS wiki</a></li>
<li><a href="https://www.shiyanlou.com/courses/854" target="_blank" rel="noopener">ROS机器人操作系统的安装、配置与初级教程</a></li>
<li><a href="https://www.shiyanlou.com/courses/938" target="_blank" rel="noopener">ROS机器人操作系统中级教程</a></li>
<li><a href="http://design.ros2.org/articles/why_ros2.html" target="_blank" rel="noopener">ROS2 Design</a></li>
</ul>


<!--<a href="http://yoursite.com/2017-12-17-ros-in-action.html#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'mickeyouyou'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=1254090228&web_id=1254090228" language="JavaScript"></script>script>
</div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->




</body>
</html>