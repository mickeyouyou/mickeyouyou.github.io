<html>
<head>
	
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><title>Adapter适配器</title>
	<meta name="keywords" content="fzb.me,冯宗宝,冯宗宝的blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=4.2" rel="stylesheet" type="text/css" />
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	   <link rel="shortcut icon" type="image/x-icon" href="/rocket_128px_1215034_easyicon.net.ico?v=4.2"/><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

</head>

<body>


<!-- hexo-inject:begin --><!-- hexo-inject:end --><h2 class="title">Adapter适配器</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2018年1月5日




 </div>
--->
</div>


<p>Adaper适配器承担了Apollo众多模块的数据承载功能，Apollo模块的输入与输出均由该模块控制。AdaperManager是一个单例模式的类。</p>
<p>为什么要有AdapterManager的存在？我举一个之前的例子，某一个应用程序，要求的处理时间上要求很高，因为下游从当前应用拿到的只是其中一部分数据，模块本身还要做其他的逻辑处理。所以，如果当前模块对这些消息数据反复读取，每增加一次，都是对耗时的大量增加。所以需要一个管理器统一管理这些输入与输出。</p>
<p>通过<code>REGISTER_ADAPTER</code>定义的宏，准备所有必要的适配器方法。例如，有模块监听topic为<code>car_status</code>消息时，你可以先为此Topic注册适配器，<code>REGISTER_ADAPTER(CarStatus)</code>，将创建名为<code>CarStatusAdapter</code>的类，在<code>AdapterManager</code>中调用<code>EnableCarStatus(&#39;car_status_topic&#39;, true, &#39;callback&#39;(如果存在回调))</code>即可。</p>
<p>下面对新增适配器的宏<code>REGISTER_ADAPTER</code>做下具体分析：<br><figure class="highlight cpp"><figcaption><span>modules/common/adapters/adapter_manager.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> REGISTER_ADAPTER(name)                                                 \</span></span><br><span class="line"> <span class="keyword">public</span>:                                                                       \</span><br><span class="line"> <span class="comment">// 打开对该Topic数据的操作</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> Enable#<span class="meta">#name(const std::string &amp;topic_name,                      \</span></span><br><span class="line">                           <span class="keyword">const</span> AdapterConfig &amp;config) &#123;                      \</span><br><span class="line">    CHECK(config.message_history_limit() &gt; <span class="number">0</span>)                                  \</span><br><span class="line">        &lt;&lt; <span class="string">"Message history limit must be greater than 0"</span>;                     \</span><br><span class="line">    instance()-&gt;InternalEnable#<span class="meta">#name(topic_name, config);                      \</span></span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="comment">// 获取Topic适配器</span></span><br><span class="line">  <span class="keyword">static</span> name##Adapter *Get#<span class="meta">#name() &#123;                                          \</span></span><br><span class="line">    <span class="keyword">return</span> instance()-&gt;InternalGet##name();                                    \</span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="comment">// 获取Topic配置文件，包含type\mode\message_history_limit字段</span></span><br><span class="line">  <span class="keyword">static</span> AdapterConfig &amp;Get#<span class="meta">#name##Config() &#123;                                  \</span></span><br><span class="line">    <span class="keyword">return</span> instance()-&gt;name##config_;                                          \</span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">bool</span> Feed#<span class="meta">#name##File(const std::string &amp;proto_file) &#123;                \</span></span><br><span class="line">    <span class="keyword">if</span> (!instance()-&gt;name##_) &#123;                                                \</span><br><span class="line">      AERROR &lt;&lt; <span class="string">"Initialize adapter before feeding protobuf"</span>;                  \</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;                                                            \</span><br><span class="line">    &#125;                                                                          \</span><br><span class="line">    <span class="keyword">return</span> Get##name()-&gt;FeedFile(proto_file);                                  \</span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="comment">// 发布Topic最新数据</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> Publish#<span class="meta">#name(const name##Adapter::DataType &amp;data) &#123;             \</span></span><br><span class="line">    instance()-&gt;InternalPublish#<span class="meta">#name(data);                                   \</span></span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;                                                        \</span><br><span class="line">  <span class="comment">// 填充Topic的头部信息</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> Fill#<span class="meta">#name##Header(const std::string &amp;module_name, T *data) &#123;    \</span></span><br><span class="line">    <span class="keyword">static_assert</span>(<span class="built_in">std</span>::is_same&lt;name##Adapter::DataType, T&gt;::value,             \</span><br><span class="line">                  <span class="string">"Data type must be the same with adapter's type!"</span>);          \</span><br><span class="line">    instance()-&gt;name##_-&gt;FillHeader(module_name, data);                        \</span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="comment">// 为消息Topic增加回调处理方法</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> Add#<span class="meta">#name##Callback(name##Adapter::Callback callback) &#123;          \</span></span><br><span class="line">    CHECK(instance()-&gt;name##_)                                                 \</span><br><span class="line">        &lt;&lt; <span class="string">"Initialize adapter before setting callback"</span>;                       \</span><br><span class="line">    instance()-&gt;name##_-&gt;AddCallback(callback);                                \</span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;                                                           \</span></span><br><span class="line"><span class="class">  <span class="title">static</span> <span class="title">void</span> <span class="title">Add</span>##<span class="title">name</span>##<span class="title">Callback</span>(                                             \</span></span><br><span class="line"><span class="class">      <span class="title">void</span> (<span class="title">T</span>:</span>:*fp)(<span class="keyword">const</span> name##Adapter::DataType &amp;data), T *obj) &#123;            \</span><br><span class="line">    Add#<span class="meta">#name##Callback(std::bind(fp, obj, std::placeholders::_1));            \</span></span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;                                                           \</span></span><br><span class="line"><span class="class">  <span class="title">static</span> <span class="title">void</span> <span class="title">Add</span>##<span class="title">name</span>##<span class="title">Callback</span>(                                             \</span></span><br><span class="line"><span class="class">      <span class="title">void</span> (<span class="title">T</span>:</span>:*fp)(<span class="keyword">const</span> name##Adapter::DataType &amp;data)) &#123;                    \</span><br><span class="line">    Add#<span class="meta">#name##Callback(fp);                                                   \</span></span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="comment">/* Returns false if there's no callback to pop out, true otherwise. */</span>       \</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">bool</span> Pop#<span class="meta">#name##Callback() &#123;                                          \</span></span><br><span class="line">    <span class="keyword">return</span> instance()-&gt;name##_-&gt;PopCallback();                                 \</span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">                                                                               \</span><br><span class="line"> <span class="keyword">private</span>:                                                                      \</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">unique_ptr</span>&lt;name##Adapter&gt; name##_;                                      \</span><br><span class="line">  ros::Publisher name##publisher_;                                             \</span><br><span class="line">  ros::Subscriber name##subscriber_;                                           \</span><br><span class="line">  AdapterConfig name##config_;                                                 \</span><br><span class="line">                                                                               \</span><br><span class="line">  <span class="comment">// 生效Topic，实例化消息管理器                                                     </span></span><br><span class="line">  <span class="keyword">void</span> InternalEnable#<span class="meta">#name(const std::string &amp;topic_name,                     \</span></span><br><span class="line">                            <span class="keyword">const</span> AdapterConfig &amp;config) &#123;                     \</span><br><span class="line">    name##_.reset(                                                             \</span><br><span class="line">        <span class="keyword">new</span> name##Adapter(#name, topic_name, config.message_history_limit())); \</span><br><span class="line">    <span class="keyword">if</span> (config.mode() != AdapterConfig::PUBLISH_ONLY &amp;&amp; IsRos()) &#123;             \</span><br><span class="line">      name##subscriber_ =                                                      \</span><br><span class="line">          node_handle_-&gt;subscribe(topic_name, config.message_history_limit(),  \</span><br><span class="line">                                  &amp;name##Adapter::OnReceive, name##_.get());   \</span><br><span class="line">    &#125;                                                                          \</span><br><span class="line">    <span class="keyword">if</span> (config.mode() != AdapterConfig::RECEIVE_ONLY &amp;&amp; IsRos()) &#123;             \</span><br><span class="line">      name##publisher_ = node_handle_-&gt;advertise&lt;name##Adapter::DataType&gt;(     \</span><br><span class="line">          topic_name, config.message_history_limit(), config.latch());         \</span><br><span class="line">    &#125;                                                                          \</span><br><span class="line">                                                                               \</span><br><span class="line">    observers_.push_back([<span class="keyword">this</span>]() &#123; name##_-&gt;Observe(); &#125;);                    \</span><br><span class="line">    name##config_ = config;                                                    \</span><br><span class="line">  &#125;                                                                            \</span><br><span class="line">  <span class="comment">// 获取消息管理器对象本身</span></span><br><span class="line">  name##Adapter *InternalGet#<span class="meta">#name() &#123; return name##_.get(); &#125;                 \</span></span><br><span class="line">  <span class="comment">// 发布消息</span></span><br><span class="line">  <span class="keyword">void</span> InternalPublish#<span class="meta">#name(const name##Adapter::DataType &amp;data) &#123;            \</span></span><br><span class="line">    <span class="comment">/* Only publish ROS msg if node handle is initialized. */</span>                  \</span><br><span class="line">    <span class="keyword">if</span> (IsRos()) &#123;                                                             \</span><br><span class="line">      <span class="keyword">if</span> (!name##publisher_.getTopic().empty()) &#123;                              \</span><br><span class="line">        name##publisher_.publish(data);                                        \</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;                                                                 \</span><br><span class="line">        AERROR &lt;&lt; #name &lt;&lt; <span class="string">" is not valid."</span>;                                   \</span><br><span class="line">      &#125;                                                                        \</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;                                                                   \</span><br><span class="line">      <span class="comment">/* For non-ROS mode, just triggers the callback. */</span>                      \</span><br><span class="line">      <span class="keyword">if</span> (name##_) &#123;                                                           \</span><br><span class="line">        name##_-&gt;OnReceive(data);                                              \</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;                                                                 \</span><br><span class="line">        AERROR &lt;&lt; #name &lt;&lt; <span class="string">" is null."</span>;                                        \</span><br><span class="line">      &#125;                                                                        \</span><br><span class="line">    &#125;                                                                          \</span><br><span class="line">    name##_-&gt;SetLatestPublished(data);                                         \</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>ROS中AdapterManager即调度中心的角色，完成节点的发布与订阅关系。</p>
<p>Adaper处理的模块数据包括：<br><figure class="highlight cpp"><figcaption><span>modules/common/adapters/adaper_manager.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/// The following code registered all the adapters of interest.</span></span><br><span class="line">REGISTER_ADAPTER(Chassis);</span><br><span class="line">REGISTER_ADAPTER(ChassisDetail);</span><br><span class="line">REGISTER_ADAPTER(ControlCommand);</span><br><span class="line">REGISTER_ADAPTER(Gps);</span><br><span class="line">REGISTER_ADAPTER(Imu);</span><br><span class="line">REGISTER_ADAPTER(RawImu);</span><br><span class="line">REGISTER_ADAPTER(Localization);</span><br><span class="line">REGISTER_ADAPTER(Monitor);</span><br><span class="line">REGISTER_ADAPTER(Pad);</span><br><span class="line">REGISTER_ADAPTER(PerceptionObstacles);</span><br><span class="line">REGISTER_ADAPTER(Planning);</span><br><span class="line">REGISTER_ADAPTER(PointCloud);</span><br><span class="line">REGISTER_ADAPTER(ImageShort);</span><br><span class="line">REGISTER_ADAPTER(ImageLong);</span><br><span class="line">REGISTER_ADAPTER(Prediction);</span><br><span class="line">REGISTER_ADAPTER(TrafficLightDetection);</span><br><span class="line">REGISTER_ADAPTER(RoutingRequest);</span><br><span class="line">REGISTER_ADAPTER(RoutingResponse);</span><br><span class="line">REGISTER_ADAPTER(RelativeOdometry);</span><br><span class="line">REGISTER_ADAPTER(InsStat);</span><br><span class="line">REGISTER_ADAPTER(InsStatus);</span><br><span class="line">REGISTER_ADAPTER(GnssStatus);</span><br><span class="line">REGISTER_ADAPTER(SystemStatus);</span><br><span class="line">REGISTER_ADAPTER(StaticInfo);</span><br><span class="line">REGISTER_ADAPTER(Mobileye);</span><br><span class="line">REGISTER_ADAPTER(DelphiESR);</span><br><span class="line">REGISTER_ADAPTER(ContiRadar);</span><br><span class="line">REGISTER_ADAPTER(CompressedImage);</span><br><span class="line">REGISTER_ADAPTER(GnssRtkObs);</span><br><span class="line">REGISTER_ADAPTER(GnssRtkEph);</span><br><span class="line">REGISTER_ADAPTER(GnssBestPose);</span><br><span class="line">REGISTER_ADAPTER(LocalizationMsfGnss);</span><br><span class="line">REGISTER_ADAPTER(LocalizationMsfLidar);</span><br><span class="line">REGISTER_ADAPTER(LocalizationMsfSinsPva);</span><br><span class="line">REGISTER_ADAPTER(LocalizationMsfStatus);</span><br><span class="line">……</span><br></pre></td></tr></table></figure></p>
<p>Topic消息在Adapter的流转</p>
<p>数据投放：</p>
<p>Apollo适配器需要在对应的模块中初始化，举例在Planning模块中，AdapaterManager的初始化需要拿Planning模块的适配器配置文件，去实例化Adapter。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">CHECK(apollo::common::util::GetProtoFromFile(FLAGS_planning_config_file,</span><br><span class="line">                                             &amp;config_))</span><br><span class="line">    &lt;&lt; <span class="string">"failed to load planning config file "</span> &lt;&lt; FLAGS_planning_config_file;</span><br><span class="line"><span class="keyword">if</span> (!AdapterManager::Initialized()) &#123;</span><br><span class="line">  AdapterManager::Init(FLAGS_planning_adapter_config_filename);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上<code>FLAGS_planning_config_file</code>配置文件内容即为：<br><figure class="highlight plain"><figcaption><span>modules/planning/config/adapter.config</span></figcaption><table><tr><td class="code"><pre><span class="line">config &#123;</span><br><span class="line">  type: LOCALIZATION</span><br><span class="line">  mode: RECEIVE_ONLY</span><br><span class="line">  message_history_limit: 1</span><br><span class="line">&#125;</span><br><span class="line">config &#123;</span><br><span class="line">  type: CHASSIS</span><br><span class="line">  mode: RECEIVE_ONLY</span><br><span class="line">  message_history_limit: 1</span><br><span class="line">&#125;</span><br><span class="line">config &#123;</span><br><span class="line">  type: ROUTING_RESPONSE</span><br><span class="line">  mode: RECEIVE_ONLY</span><br><span class="line">  message_history_limit: 1</span><br><span class="line">&#125;</span><br><span class="line">config &#123;</span><br><span class="line">  type: ROUTING_REQUEST</span><br><span class="line">  mode: PUBLISH_ONLY</span><br><span class="line">  message_history_limit: 1</span><br><span class="line">&#125;</span><br><span class="line">config &#123;</span><br><span class="line">  type: PREDICTION</span><br><span class="line">  mode: RECEIVE_ONLY</span><br><span class="line">  message_history_limit: 10</span><br><span class="line">&#125;</span><br><span class="line">config &#123;</span><br><span class="line">  type: PLANNING_TRAJECTORY</span><br><span class="line">  mode: PUBLISH_ONLY</span><br><span class="line">  message_history_limit: 1</span><br><span class="line">&#125;</span><br><span class="line">config &#123;</span><br><span class="line">  type: TRAFFIC_LIGHT_DETECTION</span><br><span class="line">  mode: RECEIVE_ONLY</span><br><span class="line">  message_history_limit: 1</span><br><span class="line">&#125;</span><br><span class="line">is_ros: true</span><br></pre></td></tr></table></figure></p>
<p>AdaperManager::Init()<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> AdapterManager::Init(<span class="keyword">const</span> AdapterManagerConfig &amp;configs) &#123;</span><br><span class="line">  <span class="keyword">if</span> (Initialized()) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  instance()-&gt;initialized_ = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (configs.is_ros()) &#123;</span><br><span class="line">    instance()-&gt;node_handle_.reset(<span class="keyword">new</span> ros::NodeHandle());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;config : configs.config()) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (config.type()) &#123;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::POINT_CLOUD:</span><br><span class="line">        EnablePointCloud(FLAGS_pointcloud_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::GPS:</span><br><span class="line">        EnableGps(FLAGS_gps_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::IMU:</span><br><span class="line">        EnableImu(FLAGS_imu_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::CHASSIS:</span><br><span class="line">        EnableChassis(FLAGS_chassis_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::LOCALIZATION:</span><br><span class="line">        EnableLocalization(FLAGS_localization_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::PERCEPTION_OBSTACLES:</span><br><span class="line">        EnablePerceptionObstacles(FLAGS_perception_obstacle_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::TRAFFIC_LIGHT_DETECTION:</span><br><span class="line">        EnableTrafficLightDetection(FLAGS_traffic_light_detection_topic,</span><br><span class="line">                                    config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::PAD:</span><br><span class="line">        EnablePad(FLAGS_pad_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::CONTROL_COMMAND:</span><br><span class="line">        EnableControlCommand(FLAGS_control_command_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::ROUTING_REQUEST:</span><br><span class="line">        EnableRoutingRequest(FLAGS_routing_request_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::ROUTING_RESPONSE:</span><br><span class="line">        EnableRoutingResponse(FLAGS_routing_response_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::PLANNING_TRAJECTORY:</span><br><span class="line">        EnablePlanning(FLAGS_planning_trajectory_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::PREDICTION:</span><br><span class="line">        EnablePrediction(FLAGS_prediction_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> AdapterConfig::MONITOR:</span><br><span class="line">        EnableMonitor(FLAGS_monitor_topic, config);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        AERROR &lt;&lt; <span class="string">"Unknown adapter config type!"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>与数据监听：<br><figure class="highlight cpp"><figcaption><span>modules/planning/planning.cc</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// snapshot all coming data</span></span><br><span class="line">  AdapterManager::Observe();</span><br></pre></td></tr></table></figure></p>
<p>数据获取：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 高精地图</span></span><br><span class="line">hdmap_ = apollo::hdmap::HDMapUtil::BaseMapPtr();</span><br><span class="line"><span class="comment">// 感知信息</span></span><br><span class="line">AdaperManager::GetPerception()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 障碍物预测行为获取</span></span><br><span class="line">AdapterManager::GetPrediction()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导航</span></span><br><span class="line">AdapterManager::GetRoutingResponse() </span><br><span class="line"></span><br><span class="line"><span class="comment">// localization</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">auto</span>&amp; localization =</span><br><span class="line">    AdapterManager::GetLocalization()-&gt;GetLatestObserved();</span><br><span class="line">ADEBUG &lt;&lt; <span class="string">"Get localization:"</span> &lt;&lt; localization.DebugString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// chassis</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">auto</span>&amp; chassis = AdapterManager::GetChassis()-&gt;GetLatestObserved();</span><br><span class="line">ADEBUG &lt;&lt; <span class="string">"Get chassis:"</span> &lt;&lt; chassis.DebugString();</span><br></pre></td></tr></table></figure>

  
    <div class="comments" id="comments">
      
        <div onclick="showGitment()" id="gitment-display-button">如果你有不同看法？</div>
        <div id="gitment-container" style="display:none"></div>
      
    </div>
  

<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=1254090228&web_id=1254090228" language="JavaScript"></script>script>
</div>




    
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    



      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: window.location.href, 
            owner: 'mickeyouyou',
            repo: 'blog_comment',
            
            lang: "en" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: '27804beebc0d0aa2ae7271191fd5adac6d1b8cb7',
            
                client_id: '57e78fbfba943c338437'
            }});
        gitment.render('gitment-container');
      }

      
          function showGitment(){
            document.getElementById("gitment-display-button").style.display = "none";
            document.getElementById("gitment-container").style.display = "block";
            renderGitment();
          }
      
      </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    




</body>
</html>