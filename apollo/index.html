<html>
<head>
	
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><title>Apollo 开发者在线文档</title>
	<meta name="keywords" content="fzb.me,冯宗宝,冯宗宝的blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=4.3" rel="stylesheet" type="text/css" />
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	   <link rel="shortcut icon" type="image/x-icon" href="/rocket_128px_1215034_easyicon.net.ico?v=4.3"/><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

</head>

<body>


<!-- hexo-inject:begin --><!-- hexo-inject:end --><h2 class="title">Apollo 开发者在线文档</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2017年8月3日




 </div>
--->
</div>

<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#文档目录"><span class="toc-text"><a href="#&#x6587;&#x6863;&#x76EE;&#x5F55;" class="headerlink" title="&#x6587;&#x6863;&#x76EE;&#x5F55;"></a>&#x6587;&#x6863;&#x76EE;&#x5F55;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Apollo参考文档"><span class="toc-text"><a href="#Apollo&#x53C2;&#x8003;&#x6587;&#x6863;" class="headerlink" title="Apollo&#x53C2;&#x8003;&#x6587;&#x6863;"></a>Apollo&#x53C2;&#x8003;&#x6587;&#x6863;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Module-Topic-and-Frequecy"><span class="toc-text"><a href="#Module-Topic-and-Frequecy" class="headerlink" title="Module Topic and Frequecy"></a>Module Topic and Frequecy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-flow"><span class="toc-text"><a href="#Data-flow" class="headerlink" title="Data flow"></a>Data flow</span></a></li></ol>
<p>本文档是在线手册的预览（Preview）版本，覆盖开发者多个阶段(因为部分内容合入到了代码库，所以就删除了这些内容，可以在GitHub看到最新的内容)，不同功能模块，不同适配平台。 给你在短时间内一个宏观的认识，由我来维护的一个在线文档站点，为Apollo开发者查漏补缺。当然，Apollo社区生龙活虎的猛士很多，提供的内容很丰富，这也是我们期望看到的，right?</p>
<h2 id="文档目录"><a href="#文档目录" class="headerlink" title="文档目录"></a>文档目录</h2><ul>
<li>安装 <ul>
<li><a href="./install_by_sourcecodes.html">软件部分编译安装</a></li>
<li><a href="./install_apollo_on_jetson_tx2.html">Apollo在Nvidia Jetson TX2的适配安装</a></li>
<li><a href="./installation_offline.html">Apollo离线安装指南</a></li>
<li><a href="./case_by_install.html">安装异常Case与解决办法</a></li>
<li><a href="./add_new_vehicle.html">从CANBUS到控制，如何新增一辆新车？</a></li>
</ul>
</li>
<li>编译相关<ul>
<li><a href="./doxygen.html">使用Doxygen生成代码结构文档</a> </li>
<li><a href="http://blog.csdn.net/davidhopper/article/details/79349927" target="_blank" rel="noopener">使用Visual Studio Code编译Apollo项目</a></li>
<li><a href="./words.html">Apollo相关名词解释</a></li>
</ul>
</li>
<li>代码与理论相关<ul>
<li><a href="./from_apollo_main_macro_to_all_modules.html">从ApolloApp类、APOLLO_MAIN宏到Apollo模块</a></li>
<li><a href="./adapter.html">Adapter适配器</a></li>
<li>模块解析<ul>
<li><a href="./module_hdmap.html">Apollo HD Map解析</a></li>
<li>Localization 定位模块<ul>
<li>RTK</li>
<li>MSF</li>
</ul>
</li>
<li><a href="./module_routing.html">Routing导航模块</a></li>
<li><a href="./module_perception.html">Perception感知模块</a><ul>
<li><a href="./3d_obstacle_perception.html">3D 障碍物感知</a> </li>
<li><a href="./traffic_light.html">交通灯识别</a></li>
</ul>
</li>
<li><a href="./module_prediction.html">Prediction 预测模块</a></li>
<li><a href="./module_planning.html">Planning决策规划模块</a><ul>
<li><a href="./reference_line.html">参考线</a></li>
<li><a href="https://arxiv.org/abs/1807.08048" target="_blank" rel="noopener">Baidu Apollo EM Planner</a></li>
<li>Lattice</li>
</ul>
</li>
<li><a href="./module_canbus.html">CAN总线控制模块(canbus)</a></li>
<li>Control 控制模块<ul>
<li>MPC</li>
</ul>
</li>
<li><a href="./module_monitor_data.html">人机交互+Monitor + Data 监控与数据收集模块</a></li>
<li><a href="./module_tools.html">Tools 开发者工具</a></li>
</ul>
</li>
</ul>
</li>
<li>社区<ul>
<li><a href="./howto/how_to_debug_your_own_planning_algorithm.html">在Apollo中调试决策规划算法</a></li>
<li><a href="./howto/how_to_add_an_external_dependency.html">添加外部依赖</a></li>
<li><a href="./howto/how_to_style_check_to_one_dir.html">对目录做代码规范检查</a></li>
<li><a href="./howto/how_to_save_load_docker_image_locally.html">在本地保存与加载Docker镜像</a></li>
<li><a href="./howto/how_to_build_and_release.html">如何编译与发布</a></li>
<li><a href="./howto">其他HowTo</a></li>
</ul>
</li>
<li>实践<ul>
<li><a href="./install_by_sourcecodes.html">Apollo 软件部分编译安装实践</a></li>
<li><a href="http://www.fzb.me/2017-9-25-driving-by-wire-tech.html" target="_blank" rel="noopener">线控车辆控制组件与自动驾驶的控制</a></li>
</ul>
</li>
<li><a href="./faq.html">FAQ</a></li>
</ul>
<h2 id="Apollo参考文档"><a href="#Apollo参考文档" class="headerlink" title="Apollo参考文档"></a>Apollo参考文档</h2><p>开发者可以在下载代码库后，参照<a href="./doxygen.html">Doxygen生成文档</a> 生成基于最新代码库的参考文档。（一般比较鸡肋，如果可以看源码，为什么还要去看这个呢，略微有些多余）当然，我们也提供基于最新发布版本的在线版：<a href="https://apolloauto.github.io/doxygen/apollo/classapollo_1_1common_1_1ApolloApp.html" target="_blank" rel="noopener">https://apolloauto.github.io/doxygen/apollo/classapollo_1_1common_1_1ApolloApp.html</a></p>
<h2 id="Module-Topic-and-Frequecy"><a href="#Module-Topic-and-Frequecy" class="headerlink" title="Module Topic and Frequecy"></a>Module Topic and Frequecy</h2><table>
<thead>
<tr>
<th style="text-align:center">MODULE</th>
<th style="text-align:center">Class</th>
<th style="text-align:left">Topic</th>
<th style="text-align:center">Period(ms)</th>
<th style="text-align:center">Frequecy(HZ)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CHASSIS</td>
<td style="text-align:center">chassis_pb2.Chassis()</td>
<td style="text-align:left">/apollo/canbus/chassis</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">CONTROL</td>
<td style="text-align:center">control_cmd_pb2.ControlCommand()</td>
<td style="text-align:left">/apollo/control</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">CHASSIS_DETAIL</td>
<td style="text-align:center">chassis_detail_pb2.ChassisDetail()</td>
<td style="text-align:left">/apollo/canbus/chassis_detail</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">LOCALIZATION</td>
<td style="text-align:center">localization_pb2.LocalizationEstimate()</td>
<td style="text-align:left">/apollo/localization/pose</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">PLANNING</td>
<td style="text-align:center">planning_pb2.ADCTrajectory()</td>
<td style="text-align:left">/apollo/planning</td>
<td style="text-align:center">200</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">PERCEPTION</td>
<td style="text-align:center">perception_obstacle_pb2.PerceptionObstacles()</td>
<td style="text-align:left">/apollo/perception/obstacles</td>
<td style="text-align:center">200</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">PREDICTION</td>
<td style="text-align:center">prediction_obstacle_pb2.PredictionObstacles()</td>
<td style="text-align:left">/apollo/prediction</td>
<td style="text-align:center">200</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">PAD</td>
<td style="text-align:center">pad_msg_pb2.PadMessage()</td>
<td style="text-align:left">/apollo/control/pad</td>
<td style="text-align:center">500</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">ODOMETRY</td>
<td style="text-align:center">gps_pb2.Gps()</td>
<td style="text-align:left">/apollo/sensor/gnss/odometry</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">IMU</td>
<td style="text-align:center">imu_pb2.CorrectedImu()</td>
<td style="text-align:left">/apollo/sensor/gnss/corrected_imu</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">ROUTING_RES</td>
<td style="text-align:center">routing_pb2.RoutingResponse()</td>
<td style="text-align:left">/apollo/routing_response</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1000</td>
</tr>
<tr>
<td style="text-align:center">ROUTING_REQ</td>
<td style="text-align:center">routing_pb2.RoutingRequest()</td>
<td style="text-align:left">/apollo/routing_request</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1000</td>
</tr>
<tr>
<td style="text-align:center">MOBILEYE</td>
<td style="text-align:center">mobileye_pb2.Mobileye()</td>
<td style="text-align:left">/apollo/sensor/mobileye</td>
<td style="text-align:center">100</td>
<td style="text-align:center">10</td>
</tr>
<tr>
<td style="text-align:center">DELPHI_ESR</td>
<td style="text-align:center">delphi_esr_pb2.DelphiESR()</td>
<td style="text-align:left">/apollo/sensor/delphi_esr</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">CONTI_RADAR</td>
<td style="text-align:center">conti_radar_pb2.ContiRadar()</td>
<td style="text-align:left">/apollo/sensor/conti_radar</td>
<td style="text-align:center">20</td>
<td style="text-align:center">50</td>
</tr>
<tr>
<td style="text-align:center">SIGNAL_LIGHT</td>
<td style="text-align:center">traffic_light_detection_pb2.TrafficLightDetection()</td>
<td style="text-align:left">/apollo/perception/traffic_light</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">DRIVE_EVENT</td>
<td style="text-align:center">drive_event_pb2.DriveEvent()</td>
<td style="text-align:left">/apollo/drive_event</td>
<td style="text-align:center">500</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">SYSTEM_STATUS</td>
<td style="text-align:center">system_status_pb2.SystemStatus()</td>
<td style="text-align:left">/apollo/monitor/system_status</td>
<td style="text-align:center">500</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">NAVIGATION</td>
<td style="text-align:center">navigation_pb2.NavigationInfo()</td>
<td style="text-align:left">/apollo/navigation</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1000</td>
</tr>
<tr>
<td style="text-align:center">RELATIVE_MAP</td>
<td style="text-align:center">navigation_pb2.MapMsg()</td>
<td style="text-align:left">/apollo/relative_map</td>
<td style="text-align:center">200</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">GUARDIAN</td>
<td style="text-align:center">guardian_pb2.GuardianCommand()</td>
<td style="text-align:left">/apollo/guardian</td>
<td style="text-align:center">100</td>
<td style="text-align:center">10</td>
</tr>
<tr>
<td style="text-align:center">MONITOR</td>
<td style="text-align:center">monitor_log_pb2.MonitorMessage()</td>
<td style="text-align:left">/apollo/monitor</td>
<td style="text-align:center">10</td>
<td style="text-align:center">100</td>
</tr>
</tbody>
</table>
<h2 id="Data-flow"><a href="#Data-flow" class="headerlink" title="Data flow"></a>Data flow</h2><p><img src="https://media.githubusercontent.com/media/ApolloAuto/apollo/master/docs/specs/images/Apollo_3.0_SW.png" width="90%"></p>
<p>1、Map data<br>As you know, for different goals, apollo use different format and different map file, mainly categoried by :</p>
<ul>
<li>base map</li>
<li>routing map</li>
<li>simulation map</li>
<li>some default routing waypoint </li>
</ul>
<p>that will contains the elements that road on in the real world, Like Road lanes lane mark and so on . On this basis, a number of auxiliary elements have been added, such as auxiliary roads such as the middle line of the road, such as the Routing Planning module. </p>
<p>2、Routing Request from Dreamview like this.or from a file <code>default_end_waypoint.txt</code> in map directory.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">waypoint &#123;</span><br><span class="line">    pose &#123;</span><br><span class="line">        x: 587696.82286</span><br><span class="line">        y: 4141446.66696</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">waypoint &#123;</span><br><span class="line">    pose &#123;</span><br><span class="line">        x: 586948.740120</span><br><span class="line">        y: 4141171.118641</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3、Get a RoutingRespose as a result, data struct like this :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">header &#123;</span><br><span class="line">  timestamp_sec: 1533844120.2057884</span><br><span class="line">  module_name: &quot;routing&quot;</span><br><span class="line">  sequence_num: 1</span><br><span class="line">&#125;</span><br><span class="line">road &#123;</span><br><span class="line">  id: &quot;2896&quot;</span><br><span class="line">  passage &#123;</span><br><span class="line">    segment &#123;</span><br><span class="line">      id: &quot;2896_1_-1&quot;</span><br><span class="line">      start_s: 3.9204489256831567</span><br><span class="line">      end_s: 7.14577</span><br><span class="line">    &#125;</span><br><span class="line">    can_exit: true</span><br><span class="line">    change_lane_type: FORWARD</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">road &#123;</span><br><span class="line">  id: &quot;2895&quot;</span><br><span class="line">  passage &#123;</span><br><span class="line">    segment &#123;</span><br><span class="line">      id: &quot;2895_1_-1&quot;</span><br><span class="line">      start_s: 0</span><br><span class="line">      end_s: 18.4625</span><br><span class="line">    &#125;</span><br><span class="line">    can_exit: true</span><br><span class="line">    change_lane_type: FORWARD</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">measurement &#123;</span><br><span class="line">  distance: 284.34704237235405 // test data not corrent </span><br><span class="line">&#125;</span><br><span class="line">routing_request &#123;</span><br><span class="line">  header &#123;</span><br><span class="line">    timestamp_sec: 1533844120.2038052</span><br><span class="line">    module_name: &quot;dreamview&quot;</span><br><span class="line">    sequence_num: 1</span><br><span class="line">  &#125;</span><br><span class="line">  waypoint &#123;</span><br><span class="line">    id: &quot;2896_1_-1&quot;</span><br><span class="line">    s: 3.9204489256831567</span><br><span class="line">    pose &#123;</span><br><span class="line">      x: 586420.32695324044</span><br><span class="line">      y: 4140565.8413469042</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  waypoint &#123;</span><br><span class="line">    id: &quot;2922_1_-1&quot;</span><br><span class="line">    s: 30.496601298037231</span><br><span class="line">    pose &#123;</span><br><span class="line">      x: 586466.290268646</span><br><span class="line">      y: 4140842.8926803083</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">map_version: &quot;1.500000&quot;</span><br><span class="line">status &#123;</span><br><span class="line">  error_code: OK</span><br><span class="line">  msg: &quot;Success!&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，也可以通过在Dreamview中选择巡航点的当时，下发RoutingRequest，这样返回的RoutingRespone就会带着原请求字段返回。比如以上测试数据中的module_name: “dreamview”.</p>
<p>4、当然，地图的数据除了用来作为路由导航之外，还有在感知、定位用作障碍物识别、特征定位。比如我们没有必要关心传感器反馈的360°的激光点云数据，所以会根据高精度地图，做一个ROIFilter的过滤。最后，从感知输出的信息，作为预测模块的输入。</p>
<p>预测模块再将这些带有预测速度、预测轨迹的障碍物信息映射到SLT的坐标序列中，做路径规划的操作。</p>


  
    <div class="comments" id="comments">
      
        <div onclick="showGitment()" id="gitment-display-button">如果你有不同看法？</div>
        <div id="gitment-container" style="display:none"></div>
      
    </div>
  

<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=1254090228&web_id=1254090228" language="JavaScript"></script>script>
</div>




    
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    



      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: window.location.href, 
            owner: 'mickeyouyou',
            repo: 'blog_comment',
            
            lang: "en" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: '27804beebc0d0aa2ae7271191fd5adac6d1b8cb7',
            
                client_id: '57e78fbfba943c338437'
            }});
        gitment.render('gitment-container');
      }

      
          function showGitment(){
            document.getElementById("gitment-display-button").style.display = "none";
            document.getElementById("gitment-container").style.display = "block";
            renderGitment();
          }
      
      </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    




</body>
</html>